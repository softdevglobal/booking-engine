(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3643:(e,t,r)=>{"use strict";r.d(t,{A:()=>s});var a=r(5155),n=r(2115),o=r(9326);function s(e){let{onClose:t,onSuccess:r}=e,{login:s,register:l,isLoading:i}=(0,o.A)(),[d,c]=(0,n.useState)(!0),[u,m]=(0,n.useState)(""),[p,h]=(0,n.useState)({name:"",email:"",password:"",phone:""}),g=e=>{let{name:t,value:r}=e.target;h(e=>({...e,[t]:r})),m("")},x=async e=>{if(e.preventDefault(),m(""),!p.email||!p.password||!d&&!p.name)return void m("Please fill in all required fields");(d?await s(p.email,p.password):await l(p.name,p.email,p.password,p.phone))?r():m(d?"Invalid email or password":"Registration failed")};return(0,a.jsx)("div",{className:"fixed inset-0 bg-white/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-[#181411]",children:d?"Login":"Create Account"}),(0,a.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,a.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,a.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,a.jsxs)("form",{onSubmit:x,className:"p-6 space-y-4",children:[u&&(0,a.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:u}),!d&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-[#181411] mb-2",children:"Full Name *"}),(0,a.jsx)("input",{id:"name",name:"name",value:p.name,onChange:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#e63946] focus:border-transparent text-[#181411]",placeholder:"Enter your full name",required:!d})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-[#181411] mb-2",children:"Email Address *"}),(0,a.jsx)("input",{id:"email",name:"email",type:"email",value:p.email,onChange:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ec8013] focus:border-transparent text-[#181411]",placeholder:"Enter your email",required:!0})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-[#181411] mb-2",children:"Password *"}),(0,a.jsx)("input",{id:"password",name:"password",type:"password",value:p.password,onChange:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ec8013] focus:border-transparent text-[#181411]",placeholder:"Enter your password",required:!0})]}),!d&&(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-[#181411] mb-2",children:"Phone Number (Optional)"}),(0,a.jsx)("input",{id:"phone",name:"phone",value:p.phone,onChange:g,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#e63946] focus:border-transparent text-[#181411]",placeholder:"Enter your phone number"})]}),(0,a.jsx)("button",{type:"submit",disabled:i,className:"w-full py-3 px-6 rounded-lg font-semibold text-white transition-colors ".concat(i?"bg-gray-400 cursor-not-allowed":"bg-[#e63946] hover:bg-[#d62839]"),children:i?"Please wait...":d?"Login":"Create Account"})]}),(0,a.jsx)("div",{className:"px-6 pb-6 text-center",children:(0,a.jsx)("button",{type:"button",onClick:()=>{c(!d),m(""),h({name:"",email:"",password:"",phone:""})},className:"text-[#e63946] hover:text-[#d62839] font-medium transition-colors",children:d?"Don't have an account? Create one":"Already have an account? Login"})})]})})}},7085:(e,t,r)=>{Promise.resolve().then(r.bind(r,9547))},9326:(e,t,r)=>{"use strict";r.d(t,{O:()=>m,A:()=>p});var a=r(5155),n=r(2115),o=r(2078),s=r(9708),l=r(3885);let i=(0,o.Wp)({apiKey:"AIzaSyAXkJB5pymjqwcTDc5DtH_CbDtXPIslsao",authDomain:"bms-pro-e3125.firebaseapp.com",projectId:"bms-pro-e3125",storageBucket:"bms-pro-e3125.firebasestorage.app",messagingSenderId:"95517764192",appId:"1:95517764192:web:a674c4c1aa55c314b23105"}),d=(0,s._A)(i,{experimentalAutoDetectLongPolling:!0}),c=(0,l.xI)(i),u=(0,n.createContext)(void 0);function m(e){let{children:t,tenantId:r}=e,[o,i]=(0,n.useState)(null),[m,p]=(0,n.useState)(!0);(0,n.useEffect)(()=>{let e=(0,l.hg)(c,async e=>{if(e)try{var t,a,n;let o=(0,s.H9)(d,"customers",e.uid),u=(await (0,s.x7)(o)).data();if(!(null==u?void 0:u.tenantId)||u.tenantId!==r){await (0,l.CI)(c),i(null),localStorage.removeItem("booking_engine_user"),p(!1);return}let m={id:e.uid,name:(null==u?void 0:u.name)||e.displayName||(null!=(n=null==(t=e.email)?void 0:t.split("@")[0])?n:"User"),email:e.email||"",phone:(null==u?void 0:u.phone)||"",avatar:(null==u?void 0:u.avatar)||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent((null==u?void 0:u.name)||(null==(a=e.email)?void 0:a.split("@")[0])||"User"),"&background=e63946&color=fff")};i(m),localStorage.setItem("booking_engine_user",JSON.stringify(m))}catch(e){i(null),localStorage.removeItem("booking_engine_user")}else i(null),localStorage.removeItem("booking_engine_user");p(!1)});return()=>e()},[r]);let h=async(e,t)=>{p(!0);try{return await (0,l.x9)(c,e,t),!0}catch(e){return!1}finally{p(!1)}},g=async(e,t,a,n)=>{p(!0);try{let{user:o}=await (0,l.eJ)(c,t,a),i={customerId:o.uid,tenantId:r,name:e,email:t,phone:n||"",avatar:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e),"&background=e63946&color=fff"),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),role:"customer",status:"active",source:"booking-engine"};return await (0,s.BN)((0,s.H9)(d,"customers",o.uid),i),!0}catch(e){return!1}finally{p(!1)}},x=async()=>{try{await (0,l.CI)(c)}finally{i(null),localStorage.removeItem("booking_engine_user")}},b=async e=>{if(!o)return!1;p(!0);try{let t={...e,customerId:o.id,updatedAt:new Date().toISOString()};await (0,s.mZ)((0,s.H9)(d,"customers",o.id),t);let r={...o,...e};return i(r),localStorage.setItem("booking_engine_user",JSON.stringify(r)),!0}catch(e){return!1}finally{p(!1)}};return(0,a.jsx)(u.Provider,{value:{user:o,isAuthenticated:!!o,isLoading:m,login:h,register:g,logout:x,updateProfile:b},children:t})}function p(){let e=(0,n.useContext)(u);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}},9547:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>i});var a=r(5155),n=r(2115),o=r(63),s=r(9326),l=r(3643);function i(){let e=(0,o.useRouter)(),{isAuthenticated:t}=(0,s.A)(),[r,i]=(0,n.useState)(!1);return(0,a.jsx)("div",{style:{minHeight:"100vh",display:"flex",alignItems:"center",justifyContent:"center",background:"#faf7f2"},children:(0,a.jsxs)("div",{style:{maxWidth:960,width:"100%",padding:24},children:[(0,a.jsxs)("div",{style:{textAlign:"center",marginBottom:24},children:[(0,a.jsx)("h1",{style:{fontSize:48,fontWeight:900,color:"#181411",margin:0},children:"Welcome"}),(0,a.jsx)("p",{style:{fontSize:18,color:"#897561",marginTop:12},children:"Plan your event with ease. Check availability, estimate pricing, and request a booking."})]}),(0,a.jsx)("div",{style:{display:"flex",justifyContent:"center",marginTop:24},children:(0,a.jsx)("button",{onClick:()=>{t?e.push("/booknow"):i(!0)},style:{background:"#e63946",color:"#fff",padding:"14px 28px",borderRadius:8,fontWeight:800,border:0,cursor:"pointer"},children:"Book Now"})}),r&&(0,a.jsx)(l.A,{onClose:()=>i(!1),onSuccess:()=>{i(!1),e.push("/booknow")}})]})})}}},e=>{e.O(0,[992,794,820,441,255,358],()=>e(e.s=7085)),_N_E=e.O()}]);