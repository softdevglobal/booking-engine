(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[510],{108:(e,t,s)=>{Promise.resolve().then(s.bind(s,8820))},3643:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(5155),a=s(2115),l=s(9326);function n(e){let{onClose:t,onSuccess:s}=e,{login:n,register:i,isLoading:o}=(0,l.A)(),[d,c]=(0,a.useState)(!0),[m,u]=(0,a.useState)(""),[x,h]=(0,a.useState)({name:"",email:"",password:"",phone:""}),p=e=>{let{name:t,value:s}=e.target;h(e=>({...e,[t]:s})),u("")},g=async e=>{if(e.preventDefault(),u(""),!x.email||!x.password||!d&&!x.name)return void u("Please fill in all required fields");(d?await n(x.email,x.password):await i(x.name,x.email,x.password,x.phone))?s():u(d?"Invalid email or password":"Registration failed")};return(0,r.jsx)("div",{className:"fixed inset-0 bg-white/30 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl max-w-md w-full max-h-[90vh] overflow-y-auto",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-[#181411]",children:d?"Login":"Create Account"}),(0,r.jsx)("button",{onClick:t,className:"text-gray-500 hover:text-gray-700 transition-colors",children:(0,r.jsx)("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),(0,r.jsxs)("form",{onSubmit:g,className:"p-6 space-y-4",children:[m&&(0,r.jsx)("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:m}),!d&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-[#181411] mb-2",children:"Full Name *"}),(0,r.jsx)("input",{id:"name",name:"name",value:x.name,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#e63946] focus:border-transparent text-[#181411]",placeholder:"Enter your full name",required:!d})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-[#181411] mb-2",children:"Email Address *"}),(0,r.jsx)("input",{id:"email",name:"email",type:"email",value:x.email,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ec8013] focus:border-transparent text-[#181411]",placeholder:"Enter your email",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-[#181411] mb-2",children:"Password *"}),(0,r.jsx)("input",{id:"password",name:"password",type:"password",value:x.password,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#ec8013] focus:border-transparent text-[#181411]",placeholder:"Enter your password",required:!0})]}),!d&&(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-[#181411] mb-2",children:"Phone Number (Optional)"}),(0,r.jsx)("input",{id:"phone",name:"phone",value:x.phone,onChange:p,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-[#e63946] focus:border-transparent text-[#181411]",placeholder:"Enter your phone number"})]}),(0,r.jsx)("button",{type:"submit",disabled:o,className:"w-full py-3 px-6 rounded-lg font-semibold text-white transition-colors ".concat(o?"bg-gray-400 cursor-not-allowed":"bg-[#e63946] hover:bg-[#d62839]"),children:o?"Please wait...":d?"Login":"Create Account"})]}),(0,r.jsx)("div",{className:"px-6 pb-6 text-center",children:(0,r.jsx)("button",{type:"button",onClick:()=>{c(!d),u(""),h({name:"",email:"",password:"",phone:""})},className:"text-[#e63946] hover:text-[#d62839] font-medium transition-colors",children:d?"Don't have an account? Create one":"Already have an account? Login"})})]})})}},8820:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>g});var r=s(5155),a=s(2115),l=s(63);let n=["S","M","T","W","T","F","S"];function i(e){let{resourceId:t,resourceName:s,hallOwnerId:l,onDateSelect:i}=e,o=new Date,[d,c]=(0,a.useState)(o.getMonth()),[m,u]=(0,a.useState)(o.getFullYear()),[x,h]=(0,a.useState)(null),[p,g]=(0,a.useState)({}),[b,f]=(0,a.useState)(!1),[v,j]=(0,a.useState)(null),[y,N]=(0,a.useState)(!1),w=new Date(m,d+1,0).getDate(),k=new Date(m,d,1).getDay();(0,a.useEffect)(()=>{if(!l)return;let e=async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;try{f(!0),j(null);let r="".concat(m,"-").concat(String(d+1).padStart(2,"0"),"-01"),a="".concat(m,"-").concat(String(d+1).padStart(2,"0"),"-").concat(String(w).padStart(2,"0")),n=new URLSearchParams({startDate:r,endDate:a});t&&n.append("resourceId",t);let i="/api/bookings/unavailable-dates/".concat(l,"?").concat(n),o=await fetch(i,{method:"GET",headers:{"Content-Type":"application/json"},signal:AbortSignal.timeout(1e4)});if(o.ok){let e=await o.json();g(e.unavailableDates||{}),j(null)}else{let t=await o.text(),r="";try{let e=JSON.parse(t);r=e.message||e.error||"Server error: ".concat(o.status)}catch(e){r="Server error: ".concat(o.status," ").concat(o.statusText)}if(s<2)return void setTimeout(()=>e(s+1),2e3);j(r),g({})}}catch(a){let t="object"==typeof a&&null!==a&&"string"==typeof a.name?a.name:void 0,r="AbortError"===t||"TimeoutError"===t;if(s<2&&!r)return void setTimeout(()=>e(s+1),2e3);r?j("Request timeout - please check if backend server is running"):j("Network error - please check if backend server is running on port 5000"),g({}),N(!0)}finally{f(!1)}};e()},[m,d,t,l,w]);let S=e=>{let s="".concat(m,"-").concat(String(d+1).padStart(2,"0"),"-").concat(String(e).padStart(2,"0"));return!!p[s]&&(t?p[s][t]&&p[s][t].length>0:Object.keys(p[s]).length>0)},T=e=>{let s="".concat(m,"-").concat(String(d+1).padStart(2,"0"),"-").concat(String(e).padStart(2,"0"));if(!p[s])return[];if(!t){let e=[];return Object.values(p[s]).forEach(t=>{e.push(...t)}),e}return p[s][t]||[]},C=e=>{let s={day:e,month:d,year:m};h(s),i&&i({...s,resourceId:t})},I=[];for(let e=0;e<k;e++)I.push((0,r.jsx)("div",{},"empty-"+e));for(let e=1;e<=w;e++){let t=x&&x.day===e&&x.month===d&&x.year===m,s=S(e),a=new Date(m,d,e)<new Date(o.getFullYear(),o.getMonth(),o.getDate()),l=T(e),n="h-12 w-full rounded-full text-base font-medium leading-normal ";t?n+="bg-[#ec8013] text-white":a?n+="bg-gray-100 text-gray-400 cursor-not-allowed":s?n+="bg-red-100 text-red-600 cursor-not-allowed":n+="hover:bg-stone-100 text-[#181411]",I.push((0,r.jsxs)("button",{className:n,onClick:()=>a||s?void 0:C(e),disabled:a||s,title:s?"Booked: ".concat(l.map(e=>"".concat(e.startTime,"-").concat(e.endTime," (").concat(e.eventType,")")).join(", ")):void 0,children:[e,s&&(0,r.jsx)("div",{className:"w-2 h-2 bg-red-500 rounded-full mx-auto mt-1"})]},e))}return(0,r.jsxs)("div",{className:"w-full max-w-sm mx-auto flex flex-col gap-1 p-4 bg-white rounded-lg shadow-md",children:[s&&(0,r.jsxs)("div",{className:"text-center mb-2",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-[#181411]",children:s}),(0,r.jsx)("p",{className:"text-xs text-[#897561]",children:"Availability"})]}),b&&(0,r.jsxs)("div",{className:"text-center py-2",children:[(0,r.jsx)("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-b-2 border-[#ec8013]"}),(0,r.jsx)("p",{className:"text-xs text-[#897561] mt-1",children:"Loading availability..."})]}),v&&(0,r.jsx)("div",{className:"text-center py-2",children:(0,r.jsxs)("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3",children:[(0,r.jsx)("p",{className:"text-xs text-red-600 mb-2",children:v}),(0,r.jsxs)("div",{className:"flex gap-2 justify-center",children:[(0,r.jsx)("button",{onClick:()=>{j(null),N(!1),c(11===d?0:d+1),setTimeout(()=>c(d),100)},className:"text-xs bg-red-100 hover:bg-red-200 text-red-700 px-2 py-1 rounded transition-colors",children:"Retry"}),y&&(0,r.jsx)("button",{onClick:()=>j(null),className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-2 py-1 rounded transition-colors",children:"Continue Offline"})]})]})}),y&&!v&&(0,r.jsx)("div",{className:"text-center py-2",children:(0,r.jsx)("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-2",children:(0,r.jsx)("p",{className:"text-xs text-yellow-700",children:"⚠️ Offline mode - availability data may not be current"})})}),(0,r.jsxs)("div",{className:"flex items-center justify-between p-2",children:[(0,r.jsx)("button",{className:"text-[#181411] hover:text-[#ec8013] transition-colors rounded-full p-2",onClick:()=>{0===d?(c(11),u(m-1)):c(d-1)},children:(0,r.jsx)("svg",{fill:"currentColor",height:"24px",viewBox:"0 0 256 256",width:"24px",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M165.66,202.34a8,8,0,0,1-11.32,11.32l-80-80a8,8,0,0,1,0-11.32l80-80a8,8,0,0,1,11.32,11.32L91.31,128Z"})})}),(0,r.jsxs)("p",{className:"text-[#181411] text-lg sm:text-xl font-bold leading-tight text-center",children:[new Date(m,d,1).toLocaleString("default",{month:"long"})," ",m]}),(0,r.jsx)("button",{className:"text-[#181411] hover:text-[#ec8013] transition-colors rounded-full p-2",onClick:()=>{11===d?(c(0),u(m+1)):c(d+1)},children:(0,r.jsx)("svg",{fill:"currentColor",height:"24px",viewBox:"0 0 256 256",width:"24px",xmlns:"http://www.w3.org/2000/svg",children:(0,r.jsx)("path",{d:"M181.66,133.66l-80,80a8,8,0,0,1-11.32-11.32L164.69,128,90.34,53.66a8,8,0,0,1,11.32-11.32l80,80A8,8,0,0,1,181.66,133.66Z"})})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-7 gap-1",children:[n.map((e,t)=>(0,r.jsx)("p",{className:"text-center text-[#897561] text-sm font-bold leading-normal tracking-[0.015em] py-2",children:e},t)),I]}),(0,r.jsx)("div",{className:"mt-3 pt-2 border-t border-gray-200",children:(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 text-xs text-[#897561] justify-center",children:[(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-red-100 border border-red-300 rounded-full"}),(0,r.jsx)("span",{children:"Booked"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-gray-100 border border-gray-300 rounded-full"}),(0,r.jsx)("span",{children:"Past"})]}),(0,r.jsxs)("div",{className:"flex items-center gap-1",children:[(0,r.jsx)("div",{className:"w-3 h-3 bg-[#ec8013] rounded-full"}),(0,r.jsx)("span",{children:"Selected"})]})]})})]})}async function o(e){let t=await e.json().catch(()=>({}));if(!e.ok){let s=(null==t?void 0:t.message)||(null==t?void 0:t.error)||"".concat(e.status," ").concat(e.statusText);throw Error("string"==typeof s?s:"Request failed")}return t}async function d(e){return o(await fetch("/api/resources/public/".concat(e),{method:"GET"}))}async function c(e){return o(await fetch("/api/pricing/public/".concat(e),{method:"GET"}))}async function m(e){return o(await fetch("/api/bookings",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)}))}var u=s(9326),x=s(3643);function h(e){let{tenantId:t,className:s,requireAuth:l=!1,allowMultiResource:n=!0}=e,[o,h]=(0,a.useState)([]),[p,g]=(0,a.useState)([]),[b,f]=(0,a.useState)(null),[v,j]=(0,a.useState)(!0),[y,N]=(0,a.useState)(null),[w,k]=(0,a.useState)(!1),[S,T]=(0,a.useState)({}),{isAuthenticated:C}=(0,u.A)(),[I,E]=(0,a.useState)(!1),[D,A]=(0,a.useState)({name:"",email:"",phone:"",eventType:"",date:"",startTime:"",endTime:"",guests:"",resources:[],message:""});(0,a.useEffect)(()=>{let e=!0;return(async()=>{try{j(!0),N(null);let[s,r]=await Promise.all([d(t),c(t).catch(()=>[])]);if(!e)return;h(s.resources),f(s.hallOwner),g(r)}catch(t){console.error(t),e&&(N("Failed to load data. Please try again later."),h([]),g([]))}finally{e&&j(!1)}})(),()=>{e=!1}},[t]);let P=e=>p.find(t=>t.resourceId===e)||null,F=(e,t,s,r)=>{let a=P(e);if(!a||!t||!s||!r)return null;let l=new Date("2000-01-01T".concat(t,":00")),n=(new Date("2000-01-01T".concat(s,":00")).getTime()-l.getTime())/36e5,i=new Date(r),o=0===i.getDay()||6===i.getDay()?a.weekendRate:a.weekdayRate;return"hourly"===a.rateType?o*n:n>=8?o:.5*o},q=e=>{let{name:t,value:s}=e.target;A(e=>({...e,[t]:s}))},_=(0,a.useMemo)(()=>D.date&&D.startTime&&D.endTime?D.resources.reduce((e,t)=>e+(F(t,D.startTime,D.endTime,D.date)||0),0):0,[D.date,D.startTime,D.endTime,D.resources]),O=e=>{if(e.resourceId){let t=e.resourceId;T(s=>({...s,[t]:{day:e.day,month:e.month,year:e.year}}))}},R=async e=>{if(e.preventDefault(),l&&!C)return void E(!0);if(0===D.resources.length)return void alert("Please select at least one resource for your event.");if(!D.name||!D.email||!D.phone||!D.eventType||!D.date||!D.startTime||!D.endTime)return void alert("Please fill in all required fields.");k(!0);try{let e=D.resources[0],s=F(e,D.startTime,D.endTime,D.date),r={customerName:D.name,customerEmail:D.email,customerPhone:D.phone,eventType:D.eventType,selectedHall:e,bookingDate:D.date,startTime:D.startTime,endTime:D.endTime,additionalDescription:D.message,hallOwnerId:t,estimatedPrice:null!=s?s:void 0,guestCount:D.guests,bookingSource:"website"},a=await m(r),l=s?" Estimated cost: $".concat(s.toFixed(2),"."):"",n=a.bookingCode?"\nYour booking code: ".concat(a.bookingCode):"",i=a.bookingSource?"\nSource: ".concat(a.bookingSource):"";alert("Thank you for your booking request!".concat(l).concat(n).concat(i," We'll get back to you soon with confirmation.")),A({name:"",email:"",phone:"",eventType:"",date:"",startTime:"",endTime:"",guests:"",resources:[],message:""})}catch(e){alert("Error submitting booking: ".concat((null==e?void 0:e.message)||"Unknown error"))}finally{k(!1)}};return(0,r.jsxs)("div",{className:s,children:[l&&!C&&(0,r.jsx)("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-6",children:(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("p",{className:"text-amber-800 text-sm",children:"Please login to make a booking."}),(0,r.jsx)("button",{onClick:()=>E(!0),className:"px-3 py-2 rounded bg-[#e63946] text-white text-sm font-semibold hover:bg-[#d62839]",children:"Login / Register"})]})}),(0,r.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-12",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6 sm:p-8 order-2 lg:order-1",children:[(0,r.jsx)("h2",{className:"text-2xl font-bold text-[#181411] mb-6",children:"Booking Request"}),(0,r.jsxs)("form",{onSubmit:R,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-[#181411] mb-2",children:"Full Name *"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",required:!0,value:D.name,onChange:q,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-0 focus:border-gray-300 text-[#181411] bg-white",placeholder:"Your full name"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-[#181411] mb-2",children:"Email Address *"}),(0,r.jsx)("input",{type:"email",id:"email",name:"email",required:!0,value:D.email,onChange:q,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-0 focus:border-gray-300 text-[#181411] bg-white",placeholder:"your@email.com"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"phone",className:"block text-sm font-medium text-[#181411] mb-2",children:"Phone Number *"}),(0,r.jsx)("input",{type:"tel",id:"phone",name:"phone",required:!0,value:D.phone,onChange:q,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-0 focus:border-gray-300 text-[#181411] bg-white",placeholder:"Your phone number"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"eventType",className:"block text-sm font-medium text-[#181411] mb-2",children:"Event Type *"}),(0,r.jsxs)("select",{id:"eventType",name:"eventType",required:!0,value:D.eventType,onChange:q,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-0 focus:border-gray-300 text-[#181411] bg-white",children:[(0,r.jsx)("option",{value:"",children:"Select event type"}),(0,r.jsx)("option",{value:"wedding",children:"Wedding"}),(0,r.jsx)("option",{value:"birthday",children:"Birthday Party"}),(0,r.jsx)("option",{value:"corporate",children:"Corporate Event"}),(0,r.jsx)("option",{value:"community",children:"Community Event"}),(0,r.jsx)("option",{value:"meeting",children:"Meeting"}),(0,r.jsx)("option",{value:"other",children:"Other"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-[#181411] mb-3",children:"Select Resources *"}),v?(0,r.jsx)("div",{className:"text-center py-4",children:(0,r.jsx)("p",{className:"text-[#897561]",children:"Loading resources..."})}):y?(0,r.jsx)("div",{className:"text-center py-4",children:(0,r.jsx)("p",{className:"text-red-600",children:y})}):(0,r.jsx)("div",{className:"space-y-3",children:o.map(e=>{var t,s,a,l;return(0,r.jsxs)("div",{className:"flex items-start space-x-3 p-3 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[(0,r.jsx)("input",{type:"checkbox",id:"resource-".concat(e.id),checked:D.resources.includes(e.id),onChange:t=>{var s,r;return s=e.id,r=t.target.checked,void A(e=>n?{...e,resources:r?[...e.resources,s]:e.resources.filter(e=>e!==s)}:{...e,resources:r?[s]:[]})},className:"mt-1 h-4 w-4 border-gray-300 rounded"}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("label",{htmlFor:"resource-".concat(e.id),className:"block text-sm font-medium text-[#181411] cursor-pointer",children:e.name}),e.description&&(0,r.jsx)("p",{className:"text-sm text-[#897561] mt-1",children:e.description}),(0,r.jsxs)("div",{className:"flex items-center gap-4 mt-2 text-xs text-[#897561]",children:[(0,r.jsxs)("span",{children:["Capacity: ",e.capacity," people"]}),(0,r.jsxs)("span",{children:["Type: ",e.type.charAt(0).toUpperCase()+e.type.slice(1)]}),(0,r.jsxs)("span",{children:["Code: ",e.code]})]}),P(e.id)&&(0,r.jsxs)("div",{className:"mt-2 p-2 bg-green-50 rounded border border-green-200",children:[(0,r.jsx)("div",{className:"text-sm font-medium text-green-800 mb-1",children:"Pricing:"}),(0,r.jsxs)("div",{className:"text-xs text-green-700",children:[(0,r.jsxs)("div",{children:["Weekday: $",null==(t=P(e.id))?void 0:t.weekdayRate,"/",null==(s=P(e.id))?void 0:s.rateType]}),(0,r.jsxs)("div",{children:["Weekend: $",null==(a=P(e.id))?void 0:a.weekendRate,"/",null==(l=P(e.id))?void 0:l.rateType]})]})]})]})]},e.id)})})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"date",className:"block text-sm font-medium text-[#181411] mb-2",children:"Preferred Date *"}),(0,r.jsx)("input",{type:"date",id:"date",name:"date",required:!0,value:D.date,onChange:q,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-0 focus:border-gray-300 text-[#181411] bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"guests",className:"block text-sm font-medium text-[#181411] mb-2",children:"Number of Guests *"}),(0,r.jsx)("input",{type:"number",id:"guests",name:"guests",required:!0,min:1,value:D.guests,onChange:q,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-0 focus:border-gray-300 text-[#181411] bg-white",placeholder:"Expected guests"})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"startTime",className:"block text-sm font-medium text-[#181411] mb-2",children:"Start Time *"}),(0,r.jsx)("input",{type:"time",id:"startTime",name:"startTime",required:!0,value:D.startTime,onChange:q,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-0 focus:border-gray-300 text-[#181411] bg-white"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"endTime",className:"block text-sm font-medium text-[#181411] mb-2",children:"End Time *"}),(0,r.jsx)("input",{type:"time",id:"endTime",name:"endTime",required:!0,value:D.endTime,onChange:q,className:"w-full px-4 py-3 border border-gray-300 rounded-lg focus:ring-0 focus:border-gray-300 text-[#181411] bg-white"})]})]}),D.resources.length>0&&D.date&&D.startTime&&D.endTime&&(0,r.jsxs)("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Estimated Cost"}),(0,r.jsxs)("div",{className:"space-y-2",children:[D.resources.map(e=>{let t=o.find(t=>t.id===e),s=F(e,D.startTime,D.endTime,D.date),a=P(e);return t&&s&&a?(0,r.jsxs)("div",{className:"flex justify-between items-center text-sm",children:[(0,r.jsxs)("span",{className:"text-blue-800",children:[t.name,":"]}),(0,r.jsxs)("span",{className:"font-semibold text-blue-900",children:["$",s.toFixed(2)]})]},e):null}),D.resources.length>1&&(0,r.jsx)("div",{className:"border-t border-blue-300 pt-2 mt-2",children:(0,r.jsxs)("div",{className:"flex justify-between items-center font-semibold text-blue-900",children:[(0,r.jsx)("span",{children:"Total Estimated Cost:"}),(0,r.jsxs)("span",{children:["$",_.toFixed(2)]})]})})]}),(0,r.jsx)("p",{className:"text-xs text-blue-700 mt-2",children:"* This is an estimate. Final pricing may vary based on specific requirements and availability."})]}),(0,r.jsx)("button",{type:"submit",disabled:w,className:"w-full font-bold py-4 px-6 rounded-lg transition-colors text-lg ".concat(w?"bg-gray-400 text-gray-200 cursor-not-allowed":"bg-[#e63946] text-white hover:bg-[#d62839]"),children:w?"Submitting...":"Submit Booking Request"})]})]}),(0,r.jsxs)("div",{className:"space-y-6 order-1 lg:order-2",children:[(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-[#181411] mb-4 text-center",children:"Check Availability"}),D.resources.length>0?(0,r.jsx)("div",{className:"space-y-6",children:D.resources.map(e=>{var s,a,l,n;let d=o.find(t=>t.id===e);return d?(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-6 last:border-b-0 last:pb-0",children:[(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(i,{resourceId:e,resourceName:d.name,hallOwnerId:t,onDateSelect:O})}),S[e]&&(0,r.jsx)("div",{className:"mt-3 text-center",children:(0,r.jsxs)("p",{className:"text-sm text-[#897561]",children:["Selected date for ",d.name,": ",null==(s=S[e])?void 0:s.day,"/",(null!=(n=null==(a=S[e])?void 0:a.month)?n:0)+1,"/",null==(l=S[e])?void 0:l.year]})})]},e):null})}):(0,r.jsxs)("div",{className:"text-center py-8",children:[(0,r.jsx)("p",{className:"text-[#897561] mb-4",children:"Select resources above to view their availability calendars"}),(0,r.jsx)("div",{className:"flex justify-center",children:(0,r.jsx)(i,{hallOwnerId:t})})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-[#181411] mb-4",children:"Contact Information"}),(0,r.jsxs)("div",{className:"space-y-3",children:[(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-[#ec8013] rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M6.62 10.79c1.44 2.83 3.76 5.14 6.59 6.59l2.2-2.2c.27-.27.67-.36 1.02-.24 1.12.37 2.33.57 3.57.57.55 0 1 .45 1 1V20c0 .55-.45 1-1 1-9.39 0-17-7.61-17-17 0-.55.45-1 1-1h3.5c.55 0 1 .45 1 1 0 1.25.2 2.45.57 3.57.11.35.03.74-.25 1.02l-2.2 2.2z"})})}),(0,r.jsx)("span",{className:"text-[#181411]",children:(null==b?void 0:b.phone)||""})]}),(0,r.jsxs)("div",{className:"flex items-center gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-[#ec8013] rounded-full flex items-center justify-center",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M20 4H4c-1.1 0-1.99.9-1.99 2L2 18c0 1.1.9 2 2 2h16c1.1 0 2-.9 2-2V6c0-1.1-.9-2-2-2zm0 4l-8 5-8-5V6l8 5 8-5v2z"})})}),(0,r.jsx)("span",{className:"text-[#181411]",children:(null==b?void 0:b.email)||""})]}),(0,r.jsxs)("div",{className:"flex items-start gap-3",children:[(0,r.jsx)("div",{className:"w-8 h-8 bg-[#ec8013] rounded-full flex items-center justify-center mt-1",children:(0,r.jsx)("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24",children:(0,r.jsx)("path",{d:"M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7zm0 9.5c-1.38 0-2.5-1.12-2.5-2.5s1.12-2.5 2.5-2.5 2.5 1.12 2.5 2.5-1.12 2.5-2.5 2.5z"})})}),(0,r.jsx)("span",{className:"text-[#181411]",children:function(e){if(!e)return"Address not provided";if("string"==typeof e)return e;let t=[];return e.line1&&t.push(e.line1),e.line2&&t.push(e.line2),e.state&&t.push(e.state),e.postcode&&t.push(e.postcode),t.length?t.join(", "):"Address not provided"}((null==b?void 0:b.address)||null)})]})]})]}),(0,r.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-[#181411] mb-4",children:"Pricing"}),p.length>0?(0,r.jsxs)("div",{className:"space-y-4",children:[p.map(e=>{let t=o.find(t=>t.id===e.resourceId);return t?(0,r.jsxs)("div",{className:"border-b border-gray-200 pb-3 last:border-b-0 last:pb-0",children:[(0,r.jsx)("h4",{className:"font-semibold text-[#181411] mb-2",children:t.name}),(0,r.jsxs)("div",{className:"text-sm text-[#181411] space-y-1",children:[(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:["Weekday (",e.rateType,"):"]}),(0,r.jsxs)("span",{className:"font-medium",children:["$",e.weekdayRate]})]}),(0,r.jsxs)("div",{className:"flex justify-between",children:[(0,r.jsxs)("span",{children:["Weekend (",e.rateType,"):"]}),(0,r.jsxs)("span",{className:"font-medium",children:["$",e.weekendRate]})]}),e.description&&(0,r.jsx)("p",{className:"text-xs text-[#897561] mt-1",children:e.description})]})]},e.id):null}),(0,r.jsx)("p",{className:"text-sm text-[#897561] mt-3",children:"* Prices may vary based on event type and requirements. Contact us for custom quotes."})]}):(0,r.jsx)("div",{className:"space-y-2 text-[#181411]",children:(0,r.jsx)("p",{className:"text-sm text-[#897561] mt-3",children:"Pricing will appear here once configured."})})]})]}),I&&(0,r.jsx)(x.A,{onClose:()=>E(!1),onSuccess:()=>E(!1)})]})]})}var p=s(5704);function g(){let e=(0,l.useSearchParams)(),t=(null==e?void 0:e.get("tenant"))||p.env.NEXT_PUBLIC_TENANT_ID||"bLRLXrfr5pRBVcUntxUFlvXewaw1";return(0,r.jsx)("div",{className:"bg-white font-sans min-h-screen flex flex-col",children:(0,r.jsx)("main",{className:"flex-1 pt-24 px-4 sm:px-8 md:px-12 lg:px-20",children:(0,r.jsxs)("div",{className:"max-w-6xl mx-auto",children:[(0,r.jsxs)("div",{className:"text-center mb-8",children:[(0,r.jsx)("h1",{className:"text-4xl sm:text-5xl font-black text-[#181411] mb-4",children:"Book Your Event"}),(0,r.jsx)("p",{className:"text-lg text-[#897561] max-w-2xl mx-auto mb-4",children:"Reserve our venue for your special occasion. Fill out the form below and we'll get back to you within 24 hours."})]}),(0,r.jsx)(h,{tenantId:t,requireAuth:!0})]})})})}},9326:(e,t,s)=>{"use strict";s.d(t,{O:()=>u,A:()=>x});var r=s(5155),a=s(2115),l=s(2078),n=s(9708),i=s(3885);let o=(0,l.Wp)({apiKey:"AIzaSyAXkJB5pymjqwcTDc5DtH_CbDtXPIslsao",authDomain:"bms-pro-e3125.firebaseapp.com",projectId:"bms-pro-e3125",storageBucket:"bms-pro-e3125.firebasestorage.app",messagingSenderId:"95517764192",appId:"1:95517764192:web:a674c4c1aa55c314b23105"}),d=(0,n._A)(o,{experimentalAutoDetectLongPolling:!0}),c=(0,i.xI)(o),m=(0,a.createContext)(void 0);function u(e){let{children:t,tenantId:s}=e,[l,o]=(0,a.useState)(null),[u,x]=(0,a.useState)(!0);(0,a.useEffect)(()=>{let e=(0,i.hg)(c,async e=>{if(e)try{var t,r,a;let l=(0,n.H9)(d,"customers",e.uid),m=(await (0,n.x7)(l)).data();if(!(null==m?void 0:m.tenantId)||m.tenantId!==s){await (0,i.CI)(c),o(null),localStorage.removeItem("booking_engine_user"),x(!1);return}let u={id:e.uid,name:(null==m?void 0:m.name)||e.displayName||(null!=(a=null==(t=e.email)?void 0:t.split("@")[0])?a:"User"),email:e.email||"",phone:(null==m?void 0:m.phone)||"",avatar:(null==m?void 0:m.avatar)||"https://ui-avatars.com/api/?name=".concat(encodeURIComponent((null==m?void 0:m.name)||(null==(r=e.email)?void 0:r.split("@")[0])||"User"),"&background=e63946&color=fff")};o(u),localStorage.setItem("booking_engine_user",JSON.stringify(u))}catch(e){o(null),localStorage.removeItem("booking_engine_user")}else o(null),localStorage.removeItem("booking_engine_user");x(!1)});return()=>e()},[s]);let h=async(e,t)=>{x(!0);try{return await (0,i.x9)(c,e,t),!0}catch(e){return!1}finally{x(!1)}},p=async(e,t,r,a)=>{x(!0);try{let{user:l}=await (0,i.eJ)(c,t,r),o={customerId:l.uid,tenantId:s,name:e,email:t,phone:a||"",avatar:"https://ui-avatars.com/api/?name=".concat(encodeURIComponent(e),"&background=e63946&color=fff"),createdAt:new Date().toISOString(),updatedAt:new Date().toISOString(),role:"customer",status:"active",source:"booking-engine"};return await (0,n.BN)((0,n.H9)(d,"customers",l.uid),o),!0}catch(e){return!1}finally{x(!1)}},g=async()=>{try{await (0,i.CI)(c)}finally{o(null),localStorage.removeItem("booking_engine_user")}},b=async e=>{if(!l)return!1;x(!0);try{let t={...e,customerId:l.id,updatedAt:new Date().toISOString()};await (0,n.mZ)((0,n.H9)(d,"customers",l.id),t);let s={...l,...e};return o(s),localStorage.setItem("booking_engine_user",JSON.stringify(s)),!0}catch(e){return!1}finally{x(!1)}};return(0,r.jsx)(m.Provider,{value:{user:l,isAuthenticated:!!l,isLoading:u,login:h,register:p,logout:g,updateProfile:b},children:t})}function x(){let e=(0,a.useContext)(m);if(!e)throw Error("useAuth must be used within an AuthProvider");return e}}},e=>{e.O(0,[992,794,820,441,255,358],()=>e(e.s=108)),_N_E=e.O()}]);